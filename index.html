<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="timezone" content="Asia/Shanghai" />
    <title>长租公寓CRM系统</title>
    <script>
      // 设置全局时区为北京时间
      if (typeof Intl !== 'undefined') {
        // 设置默认时区为Asia/Shanghai
        Intl.DateTimeFormat.prototype.resolvedOptions = function() {
          const options = Intl.DateTimeFormat.prototype.resolvedOptions.call(this);
          options.timeZone = 'Asia/Shanghai';
          return options;
        };
      }
      
      // 设置dayjs默认时区（如果使用dayjs）
      if (typeof window !== 'undefined') {
        window.__TIMEZONE__ = 'Asia/Shanghai';
      }
      // 兜底：页面加载时hash写入localStorage
      if (window.location.hash && window.location.hash.includes('access_token')) {
        localStorage.setItem('invite_token_hash', window.location.hash);
        console.log('[index.html] 已将hash写入localStorage:', window.location.hash);
      }
      // 兜底：如果hash丢失但localStorage有token，自动恢复hash
      if (!window.location.hash && localStorage.getItem('invite_token_hash')) {
        window.location.hash = localStorage.getItem('invite_token_hash');
        console.log('[index.html] 恢复hash:', window.location.hash);
      }
      console.log('[index.html] 页面初始hash:', window.location.hash);
      window.addEventListener('hashchange', function() {
        console.log('[index.html] hashchange:', window.location.hash);
      });
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html> 