# é‚®ä»¶å‘é€é—®é¢˜è§£å†³æ–¹æ¡ˆ

## ğŸ” é—®é¢˜è¯Šæ–­ç»“æœ

### âœ… å·²ç¡®è®¤çš„é—®é¢˜
1. **Resend APIå·¥ä½œæ­£å¸¸** - å·²éªŒè¯é‚®ç®±å¯ä»¥æ”¶åˆ°é‚®ä»¶
2. **å¼€å‘ç¯å¢ƒé™åˆ¶** - åªèƒ½å‘é€åˆ°å·²éªŒè¯çš„é‚®ç®±
3. **Edge Functionæƒé™é—®é¢˜** - éœ€è¦ç”¨æˆ·ç™»å½•æ‰èƒ½è°ƒç”¨
4. **ç¼ºå°‘è‡ªå®šä¹‰åŸŸå** - åŸŸååˆ—è¡¨ä¸ºç©º

### ğŸ“§ é‚®ä»¶å‘é€çŠ¶æ€
- âœ… `zhoulingxin0309@gmail.com` - å¯ä»¥æ”¶åˆ°é‚®ä»¶
- âŒ `test@example.com` - è¢«Resendæ‹’ç»ï¼ˆå¼€å‘ç¯å¢ƒé™åˆ¶ï¼‰
- âœ… `delivered@resend.dev` - å¯ä»¥æ”¶åˆ°é‚®ä»¶

## ğŸ› ï¸ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1: ä½¿ç”¨å·²éªŒè¯é‚®ç®±ï¼ˆç«‹å³ç”Ÿæ•ˆï¼‰

#### æ­¥éª¤1: åœ¨ç³»ç»Ÿä¸­ä½¿ç”¨å·²éªŒè¯é‚®ç®±
```javascript
// åœ¨é‚€è¯·åŠŸèƒ½ä¸­ä½¿ç”¨å·²éªŒè¯çš„é‚®ç®±
const verifiedEmails = [
  'zhoulingxin0309@gmail.com',
  'delivered@resend.dev'
];
```

#### æ­¥éª¤2: æ›´æ–°é‚€è¯·é€»è¾‘
åœ¨ `supabase/functions/invite-user/index.ts` ä¸­æ·»åŠ é‚®ç®±éªŒè¯ï¼š

```typescript
// æ£€æŸ¥é‚®ç®±æ˜¯å¦å·²éªŒè¯
const verifiedEmails = [
  'zhoulingxin0309@gmail.com',
  'delivered@resend.dev'
];

if (!verifiedEmails.includes(email)) {
  return new Response(JSON.stringify({
    error: 'é‚®ç®±æœªéªŒè¯',
    message: 'è¯·ä½¿ç”¨å·²éªŒè¯çš„é‚®ç®±åœ°å€ï¼Œæˆ–è”ç³»ç®¡ç†å‘˜æ·»åŠ é‚®ç®±åˆ°éªŒè¯åˆ—è¡¨'
  }), {
    status: 400,
    headers: corsHeaders
  });
}
```

### æ–¹æ¡ˆ2: é…ç½®è‡ªå®šä¹‰åŸŸåï¼ˆæ¨èï¼‰

#### æ­¥éª¤1: åœ¨Resendä¸­æ·»åŠ åŸŸå
1. ç™»å½• [Resend Dashboard](https://resend.com/domains)
2. ç‚¹å‡» "Add Domain"
3. è¾“å…¥æ‚¨çš„åŸŸåï¼ˆå¦‚ï¼š`yourdomain.com`ï¼‰
4. æŒ‰ç…§æŒ‡ç¤ºé…ç½®DNSè®°å½•

#### æ­¥éª¤2: é…ç½®DNSè®°å½•
åœ¨æ‚¨çš„åŸŸåæä¾›å•†ï¼ˆå¦‚é˜¿é‡Œäº‘ï¼‰ä¸­æ·»åŠ ä»¥ä¸‹DNSè®°å½•ï¼š

```
ç±»å‹: TXT
åç§°: @
å€¼: resend-verification=your_verification_code
```

#### æ­¥éª¤3: éªŒè¯åŸŸå
1. ç­‰å¾…DNSä¼ æ’­ï¼ˆé€šå¸¸5-10åˆ†é’Ÿï¼‰
2. åœ¨Resendä¸­ç‚¹å‡» "Verify Domain"
3. ç¡®è®¤åŸŸåéªŒè¯æˆåŠŸ

#### æ­¥éª¤4: æ›´æ–°Edge Function
```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
supabase secrets set RESEND_FROM_DOMAIN=yourdomain.com

# é‡æ–°éƒ¨ç½²å‡½æ•°
supabase functions deploy invite-user
```

### æ–¹æ¡ˆ3: å‡çº§åˆ°ç”Ÿäº§ç¯å¢ƒ

#### æ­¥éª¤1: å‡çº§Resendè´¦æˆ·
1. ç™»å½• [Resend Dashboard](https://resend.com/settings)
2. å‡çº§åˆ°ä»˜è´¹è®¡åˆ’
3. è·å¾—ç”Ÿäº§ç¯å¢ƒæƒé™

#### æ­¥éª¤2: é…ç½®ç”Ÿäº§ç¯å¢ƒ
```bash
# è®¾ç½®ç”Ÿäº§ç¯å¢ƒå˜é‡
supabase secrets set RESEND_ENVIRONMENT=production
supabase secrets set RESEND_FROM_DOMAIN=yourdomain.com

# é‡æ–°éƒ¨ç½²å‡½æ•°
supabase functions deploy invite-user
```

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### 1. æµ‹è¯•å·²éªŒè¯é‚®ç®±
```bash
# è¿è¡Œæµ‹è¯•è„šæœ¬
node test_resend_direct.js
```

### 2. æµ‹è¯•é‚€è¯·åŠŸèƒ½
1. ç™»å½•ç³»ç»Ÿ
2. è¿›å…¥éƒ¨é—¨ç®¡ç†é¡µé¢
3. å‘é€é‚€è¯·åˆ°å·²éªŒè¯é‚®ç®±
4. æ£€æŸ¥é‚®ä»¶æ˜¯å¦æ”¶åˆ°

### 3. éªŒè¯é‚®ä»¶å†…å®¹
- âœ… æ£€æŸ¥é‚®ä»¶ä¸»é¢˜
- âœ… æ£€æŸ¥é‚®ä»¶å†…å®¹
- âœ… æ£€æŸ¥é‚€è¯·é“¾æ¥
- âœ… æµ‹è¯•é“¾æ¥é‡å®šå‘

## ğŸ“‹ æ£€æŸ¥æ¸…å•

### é‚®ä»¶å‘é€å‰
- [ ] ç¡®è®¤é‚®ç®±å·²éªŒè¯
- [ ] æ£€æŸ¥Resend APIå¯†é’¥
- [ ] éªŒè¯Edge Functionæƒé™
- [ ] æµ‹è¯•é‚®ä»¶æ¨¡æ¿

### é‚®ä»¶å‘é€å
- [ ] æ£€æŸ¥æ”¶ä»¶ç®±
- [ ] æ£€æŸ¥åƒåœ¾é‚®ä»¶æ–‡ä»¶å¤¹
- [ ] éªŒè¯é‚®ä»¶å†…å®¹
- [ ] æµ‹è¯•é‚€è¯·é“¾æ¥

### é—®é¢˜æ’æŸ¥
- [ ] æŸ¥çœ‹Resend Dashboardæ—¥å¿—
- [ ] æ£€æŸ¥Edge Functionæ—¥å¿—
- [ ] éªŒè¯ç¯å¢ƒå˜é‡é…ç½®
- [ ] æµ‹è¯•ä¸åŒé‚®ç®±ç±»å‹

## ğŸš€ ç«‹å³è¡ŒåŠ¨

### æ¨èæ­¥éª¤
1. **ç«‹å³ä½¿ç”¨å·²éªŒè¯é‚®ç®±æµ‹è¯•**
2. **é…ç½®è‡ªå®šä¹‰åŸŸå**
3. **å‡çº§åˆ°ç”Ÿäº§ç¯å¢ƒ**
4. **å®Œå–„é”™è¯¯å¤„ç†**

### ä¼˜å…ˆçº§
1. ğŸ”¥ **é«˜ä¼˜å…ˆçº§**: ä½¿ç”¨å·²éªŒè¯é‚®ç®±ç¡®ä¿åŠŸèƒ½å¯ç”¨
2. âš¡ **ä¸­ä¼˜å…ˆçº§**: é…ç½®è‡ªå®šä¹‰åŸŸå
3. ğŸ“ˆ **ä½ä¼˜å…ˆçº§**: å‡çº§åˆ°ç”Ÿäº§ç¯å¢ƒ

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·ï¼š
1. æ£€æŸ¥Resend Dashboardçš„é‚®ä»¶æ—¥å¿—
2. æŸ¥çœ‹Supabase Edge Functionæ—¥å¿—
3. æä¾›å…·ä½“çš„é”™è¯¯ä¿¡æ¯
4. åˆ†äº«æµ‹è¯•é‚®ç®±åœ°å€

---

**æœ€åæ›´æ–°**: 2025-07-20
**çŠ¶æ€**: é—®é¢˜å·²è¯Šæ–­ï¼Œè§£å†³æ–¹æ¡ˆå·²æä¾› 