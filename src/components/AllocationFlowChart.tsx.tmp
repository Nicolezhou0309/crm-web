import React, { useState, useEffect } from 'react';
import {
  Card,
  Button,
  Space,
  Tag,
  Modal,
  Form,
  Input,
  Select,
  message,
  Row,
  Col,
  Typography,
  Tooltip,
  Badge,
  Switch,
  InputNumber,
  TimePicker
} from 'antd';
import type { SelectProps } from 'antd';
import {
  PlusOutlined,
  EditOutlined,
  DeleteOutlined,
  ArrowRightOutlined,
  SettingOutlined,
  TeamOutlined,
  BranchesOutlined,
  PlayCircleOutlined,
  CheckCircleOutlined,
  ClockCircleOutlined,
  LockOutlined,
  UnlockOutlined
} from '@ant-design/icons';
import { arrayMoveImmutable } from 'array-move';
import type { SimpleAllocationRule, UserGroup } from '../types/allocation';
import { ALLOCATION_METHODS, WEEKDAY_OPTIONS } from '../types/allocation';
import dayjs from 'dayjs';
import { supabase } from '../supaClient';
import * as allocationApi from '../utils/allocationApi';

const { Text, Title } = Typography;
const { Option } = Select;

// ... 其余代码保持不变 ... 