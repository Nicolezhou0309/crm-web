/* 手机端Followups页面样式 */
.mobile-followups {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  /* 隐藏全局顶部导航条，避免重复 */
  padding-top: 0;
}

/* 隐藏全局顶部导航条在mobile页面 */
.mobile-followups .app-header {
  display: none !important;
}

.mobile-content {
  padding: 0;
  margin: 0;
  flex: 1;
  display: flex;
  flex-direction: column;
}

/* 移动端头部组件样式 */
.mobile-header {
  position: sticky;
  top: 0;
  z-index: 100;
  background: #fff;
  padding: 20px 16px 12px 16px; /* 增加顶部padding，补偿全局导航条的高度 */
  border-bottom: 1px solid #f0f0f0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  box-shadow: 0 1px 4px rgba(0,0,0,0.1);
  flex-wrap: wrap; /* 允许换行以适应视图切换组件 */
}

.header-search {
  flex: 1;
  max-width: none;
}

.header-search .ant-input-search {
  width: 100%;
}

.header-actions {
  flex-shrink: 0;
  display: flex;
  gap: 8px;
}

/* 卡片容器 */
.cards-container {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  position: relative;
  padding: 0; /* 移除padding，避免空行 */
  -webkit-overflow-scrolling: touch; /* iOS 滚动优化 */
  /* 瀑布流优化 */
  contain: layout style;
  /* 确保内容从顶部开始 */
  display: flex;
  flex-direction: column;
  /* 修复顶部对齐 */
  align-items: stretch;
  justify-content: flex-start;
}

/* 卡片列表 */
.cards-list {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 16px 0;
}

/* 空状态样式 */
.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 200px;
  text-align: center;
  color: #8c8c8c;
  font-size: 14px;
}

.empty-state p {
  margin: 8px 0;
}

/* 响应式设计 - 仅区分大屏幕和小屏幕 */
/* 小屏幕断点：768px以下 */
@media (max-width: 768px) {
  .mobile-header {
    padding: 16px 12px 8px 12px; /* 小屏幕下也增加顶部padding */
    gap: 8px;
    flex-direction: column; /* 小屏幕下改为垂直布局 */
    align-items: stretch;
  }
  
  .header-search {
    order: 1; /* 搜索框在上方 */
  }
  
  .header-actions {
    order: 2; /* 筛选按钮在下方 */
    justify-content: center; /* 居中显示 */
  }
  
  .cards-container {
    padding: 0;
  }
  
  .cards-list {
    gap: 12px;
    padding: 12px 0;
  }
}

/* 超小屏幕优化 */
@media (max-width: 480px) {
  .mobile-header {
    padding: 10px 10px 6px 10px;
  }
  
  .cards-container {
    padding: 0px;
  }
  
  .cards-list {
    gap: 10px;
    padding: 10px 0;
  }
  
  /* 瀑布流两列布局样式 - 使用Flexbox列容器实现真正的瀑布流吸附 */
  .cards-grid {
    display: flex;
    flex-direction: row;
    gap: 12px; /* 列之间的间距 */
    padding: 0; /* 移除padding，避免顶部空行 */
    /* 瀑布流基础设置 */
    align-items: flex-start; /* 列顶部对齐 */
    justify-content: center; /* 列居中对齐 */
    /* 容器设置 */
    min-height: auto; /* 自适应高度，避免空行 */
  }
  
  /* 瀑布流列容器样式 */
  .waterfall-column {
    display: flex;
    flex-direction: column;
    flex: 1;
    min-width: 0; /* 允许列收缩 */
    padding: 0 6px; /* 列内边距 */
    /* 确保没有多余空行 */
    min-height: 0;
    height: fit-content;
    /* 修复顶部对齐问题 */
    align-items: stretch;
    justify-content: flex-start;
    /* 调试样式 - 临时添加 */
    background: rgba(255, 0, 0, 0.1); /* 红色半透明背景 */
    border: 1px solid red; /* 红色边框 */
  }

  .card-grid-item {
    width: 100%; /* 填满列容器 */
    min-height: 0; /* 允许内容收缩 */
    /* 瀑布流优化 */
    break-inside: avoid;
    page-break-inside: avoid;
    /* 确保卡片正确显示 */
    height: fit-content;
    /* 瀑布流位置控制 */
    transition: all 0.3s ease; /* 平滑过渡效果 */
    /* Flexbox 布局优化 */
    flex-shrink: 0; /* 防止卡片收缩 */
    margin-bottom: 12px; /* 卡片之间的垂直间距 */
    /* 确保没有多余空行 */
    display: block;
  }
  
  /* 确保卡片在瀑布流中正确显示 */
  .card-grid-item .customer-card {
    width: 100%;
    height: auto; /* 允许高度自适应 */
    min-height: 40px; /* 进一步减少最小高度，避免空行 */
    margin: 0; /* 移除默认margin */
    /* 瀑布流优化 */
    break-inside: avoid;
    page-break-inside: avoid;
    /* 瀑布流布局优化 */
    display: block;
  }
}

/* 视图切换组件样式 */
.header-view-switch {
  flex-shrink: 0;
  margin: 0 8px;
  order: 1; /* 确保在搜索框和按钮之间 */
}

.header-view-switch .ant-segmented {
  background: #f8f9fa;
  border: 1px solid #e6f7ff;
}

.header-view-switch .ant-segmented-item {
  min-width: 60px;
  padding: 2px 8px;
}

.header-view-switch .ant-segmented-item-selected {
  background: #1890ff;
  color: white;
}

/* 瀑布流容器样式 */
.waterfall-container {
  flex: 1;
  overflow: hidden;
  background: #f8f9fa;
}

.mobile-waterfall {
  height: 100%;
  background: transparent;
}

/* 嵌入式瀑布流页面样式调整 */
.mobile-waterfall .waterfall-layout {
  height: 100%;
}

.mobile-waterfall .waterfall-header {
  display: none; /* 隐藏嵌入式页面的头部 */
}

.mobile-waterfall .search-header {
  display: none; /* 隐藏嵌入式页面的搜索头部 */
}

.mobile-waterfall .waterfall-content {
  padding-top: 0;
  height: 100%;
}

.mobile-waterfall .main-waterfall {
  height: 100%;
  padding: 16px 12px;
}

/* 响应式调整 */
@media (max-width: 480px) {
  .mobile-header {
    padding: 16px 12px 10px 12px;
    gap: 8px;
  }
  
  .header-view-switch {
    margin: 0 4px;
  }
  
  .header-view-switch .ant-segmented-item {
    min-width: 50px;
    padding: 2px 6px;
  }
  
  .mobile-waterfall .main-waterfall {
    padding: 12px 8px;
  }
  
  /* 小屏幕下的瀑布流布局调整 */
  .cards-grid {
    padding: 8px 0;
    gap: 8px; /* 减少列间距 */
    /* 瀑布流基础设置 */
    align-items: flex-start; /* 列顶部对齐 */
    justify-content: center; /* 列居中对齐 */
  }
  
  .card-grid-item .customer-card {
    min-height: 40px; /* 进一步减少最小高度，避免空行 */
    /* 小屏幕下的自适应优化 */
    height: auto;
    /* 瀑布流优化 */
    break-inside: avoid;
    page-break-inside: avoid;
  }
  
  /* 小屏幕下的卡片宽度调整 */
  .card-grid-item {
    width: 100%; /* 填满Grid单元格 */
    align-self: start; /* 卡片顶部对齐 */
    justify-self: stretch; /* 填满Grid单元格宽度 */
  }
}

/* 超小屏幕时，视图切换放到第二行 */
@media (max-width: 320px) {
  .mobile-header {
    flex-direction: column;
    align-items: stretch;
    gap: 12px;
  }
  
  .header-search {
    order: 1;
  }
  
  .header-view-switch {
    order: 2;
    margin: 0;
    display: flex;
    justify-content: center;
  }
  
  .header-actions {
    order: 3;
    justify-content: center;
  }
  
  /* 超小屏幕下改为单列瀑布流布局 */
  .cards-grid {
    grid-template-columns: 1fr; /* 单列 */
    gap: 10px; /* 单列间距 */
    /* 瀑布流基础设置 */
    grid-auto-rows: min-content; /* 行高自适应内容 */
    align-items: start; /* 卡片顶部对齐 */
  }
  
  /* 超小屏幕下的卡片宽度调整 */
  .card-grid-item {
    width: 100%; /* 单列全宽 */
    align-self: start; /* 卡片顶部对齐 */
    justify-self: stretch; /* 填满Grid单元格宽度 */
  }
  
  .card-grid-item .customer-card {
    min-height: 40px; /* 进一步减少最小高度，避免空行 */
    /* 超小屏幕下的自适应优化 */
    height: auto;
    /* 瀑布流优化 */
    break-inside: avoid;
    page-break-inside: avoid;
  }
}
